# Инструкция по деплою

## Предварительные требования

1. Установленный Docker и Docker Compose
2. Доступ к серверу по SSH
3. Доменное имя <example.com> и его поддомены

## Шаги по деплою

### 1. Клонирование репозитория

```bash
git clone <URL репозитория>
cd app
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта с необходимыми переменными:

```bash
echo "VITE_API_BASE_URL=https://<example.com>" > .env
echo "VITE_COOKIE_DOMAIN=.<example.com>" >> .env
```

Обратите внимание на точку перед доменом в VITE_COOKIE_DOMAIN - это позволяет использовать куки на всех поддоменах.

### 3. Сборка и запуск контейнеров

```bash
docker-compose up -d --build
```

Это соберет образ и запустит контейнер в фоновом режиме.

### 4. Настройка DNS

Убедитесь, что все нужные поддомены настроены в DNS и указывают на IP-адрес вашего сервера.

### 5. Проверка работоспособности

Приложение будет доступно по адресу http://<example.com> и на всех настроенных поддоменах.

## Обновление приложения

При необходимости обновления:

```bash
git pull
sudo docker compose down
sudo docker compose up -d --build
```

## Остановка приложения

```bash
docker-compose down
```
